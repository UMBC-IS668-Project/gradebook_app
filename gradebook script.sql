-- MySQL Script generated by MySQL Workbench
-- 04/05/21 17:59:03
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema gradebook
-- -----------------------------------------------------
-- Gradebook schema for IS668 project

-- -----------------------------------------------------
-- Schema gradebook
--
-- Gradebook schema for IS668 project
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `gradebook` DEFAULT CHARACTER SET utf8 ;
USE `gradebook` ;

-- -----------------------------------------------------
-- Table `gradebook`.`student`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `gradebook`.`student` ;

CREATE TABLE IF NOT EXISTS `gradebook`.`student` (
  `studentID` INT NOT NULL COMMENT 'Artificial primary key.',
  `firstName` VARCHAR(45) NOT NULL COMMENT 'The first name of the student.',
  `lastName` VARCHAR(45) NOT NULL COMMENT 'The last name of the student.',
  `emailAddress` VARCHAR(45) NULL COMMENT 'The email address of the student.',
  `major` VARCHAR(45) NULL COMMENT 'The school major of the student.',
  PRIMARY KEY (`studentID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `gradebook`.`schoolClass`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `gradebook`.`schoolClass` ;

CREATE TABLE IF NOT EXISTS `gradebook`.`schoolClass` (
  `classID` INT NOT NULL,
  `className` VARCHAR(45) NOT NULL COMMENT 'The name of the school class.',
  `department` VARCHAR(45) NULL COMMENT 'The department the class belongs in.',
  PRIMARY KEY (`classID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `gradebook`.`schoolClassOffering`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `gradebook`.`schoolClassOffering` ;

CREATE TABLE IF NOT EXISTS `gradebook`.`schoolClassOffering` (
  `classID` INT NOT NULL COMMENT 'Foreign key from schoolClass table.',
  `semester` VARCHAR(45) NOT NULL COMMENT 'The semester the class took place in.',
  `year` INT NOT NULL COMMENT 'The year the class took place in.',
  `classOfferingID` INT NOT NULL COMMENT 'Artificial primary key.',
  PRIMARY KEY (`classOfferingID`),
  CONSTRAINT `classID`
    FOREIGN KEY ()
    REFERENCES `gradebook`.`schoolClass` ()
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `gradebook`.`assignment`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `gradebook`.`assignment` ;

CREATE TABLE IF NOT EXISTS `gradebook`.`assignment` (
  `assignmentID` INT NOT NULL COMMENT 'Artificial primary key.',
  `assignmentName` VARCHAR(45) NULL COMMENT 'The name of the assignment.',
  `classOfferingID` VARCHAR(45) NOT NULL COMMENT 'Foreign key from schoolClass table.',
  PRIMARY KEY (`assignmentID`),
  CONSTRAINT `classOfferingID`
    FOREIGN KEY ()
    REFERENCES `gradebook`.`schoolClassOffering` ()
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `gradebook`.`studentSchoolClassOffering`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `gradebook`.`studentSchoolClassOffering` ;

CREATE TABLE IF NOT EXISTS `gradebook`.`studentSchoolClassOffering` (
  `studentID` INT NOT NULL COMMENT 'Foreign key from student table. Composite primary key.',
  `classOfferingID` VARCHAR(45) NOT NULL COMMENT 'Foreign key from schoolClassOffering table. Composite primary key.',
  PRIMARY KEY (`classOfferingID`, `studentID`),
  CONSTRAINT `studentID`
    FOREIGN KEY ()
    REFERENCES `gradebook`.`student` ()
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `classOfferingID`
    FOREIGN KEY ()
    REFERENCES `gradebook`.`schoolClassOffering` ()
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `gradebook`.`grade`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `gradebook`.`grade` ;

CREATE TABLE IF NOT EXISTS `gradebook`.`grade` (
  `assignmentID` INT NOT NULL COMMENT 'Foreign key from assignment table. Part of composite primary key.',
  `studentID` VARCHAR(45) NOT NULL COMMENT 'Foreign key from student table. Part of composite primary key.',
  `grade` FLOAT NULL COMMENT 'Store\'s a student\'s grade for an assignment',
  PRIMARY KEY (`assignmentID`, `studentID`),
  CONSTRAINT `assignmentID`
    FOREIGN KEY ()
    REFERENCES `gradebook`.`assignment` ()
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `studentID`
    FOREIGN KEY ()
    REFERENCES `gradebook`.`student` ()
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
